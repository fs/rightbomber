// Generated by CoffeeScript 1.3.3
var Keyboard,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Keyboard = (function() {

  Keyboard.prototype.keyNames = {
    38: 'up',
    40: 'down',
    37: 'left',
    39: 'right',
    87: 'w',
    83: 's',
    65: 'a',
    68: 'd'
  };

  function Keyboard() {
    this.keyUp = __bind(this.keyUp, this);

    this.keyDown = __bind(this.keyDown, this);

    this.latestOf = __bind(this.latestOf, this);
    this.keys = {};
    $(document).keydown(this.keyDown);
    $(document).keyup(this.keyUp);
  }

  Keyboard.prototype.latestOf = function(keyNames) {
    var key, latest, _i, _len, _ref;
    if (keyNames == null) {
      keyNames = [];
    }
    latest = null;
    for (_i = 0, _len = keyNames.length; _i < _len; _i++) {
      key = keyNames[_i];
      if (this.keys[key] > ((_ref = this.keys[latest]) != null ? _ref : 0)) {
        latest = key;
      }
    }
    return latest;
  };

  Keyboard.prototype.keyDown = function(event) {
    var keyName;
    keyName = this.keyNames[event.keyCode];
    if (!this.keys[keyName]) {
      return this.keys[keyName] = this.time();
    }
  };

  Keyboard.prototype.keyUp = function(event) {
    return this.keys[this.keyNames[event.keyCode]] = 0;
  };

  Keyboard.prototype.time = function() {
    return (new Date).getTime();
  };

  return Keyboard;

})();
